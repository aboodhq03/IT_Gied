/* ===== Page BG ===== */
body {
    background: radial-gradient(1200px 800px at 40% 20%, rgba(56,189,248,.18), transparent 60%), radial-gradient(900px 700px at 70% 60%, rgba(167,139,250,.14), transparent 60%), #0b0f17;
}

/* ===== Wrapper ===== */
.roadmap-wrap {
    padding: 28px 16px;
}

/* ===== Nodes container ===== */
.nodes {
    position: relative; /* مهم للـ SVG absolute */
    width: min(1200px, 96vw);
    margin: 0 auto;
    padding: 34px 16px 120px;
    display: flex;
    flex-wrap: wrap; /* شكل خريطة */
    justify-content: center;
    gap: 34px 30px;
}

/* ===== SVG edges layer ===== */
.edges {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 1;
    overflow: visible;
}

/* ===== Node (circle like your image) ===== */
.node {
    position: relative;
    z-index: 2; /* فوق الخطوط */
    width: 150px;
    height: 150px;
    border-radius: 999px;
    background: rgba(255,255,255,.07);
    border: 4px solid rgba(255,255,255,.18);
    box-shadow: 0 18px 45px rgba(0,0,0,.45);
    backdrop-filter: blur(8px);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    padding: 14px 12px 12px;
}

    /* code pill */
    .node .code {
        position: absolute;
        top: -14px;
        padding: 6px 10px;
        border-radius: 999px;
        background: rgba(0,0,0,.45);
        border: 1px solid rgba(255,255,255,.18);
        font-size: 12px;
        font-weight: 800;
        color: #e8eefc;
    }

    /* title: prevent overflow */
    .node .name {
        margin-top: 8px;
        color: #e8eefc;
        font-weight: 900;
        font-size: 13px;
        line-height: 1.25;
        display: -webkit-box;
        -webkit-line-clamp: 4; /* أقصى 4 أسطر */
        -webkit-box-orient: vertical;
        overflow: hidden;
        word-break: break-word;
    }

    /* desc: optional and clipped */
    .node .desc {
        margin-top: 6px;
        font-size: 11px;
        line-height: 1.25;
        opacity: .85;
        padding: 0 8px;
        display: -webkit-box;
        -webkit-line-clamp: 2; /* أقصى سطرين */
        -webkit-box-orient: vertical;
        overflow: hidden;
        word-break: break-word;
    }

    /* form (avoid any global form/card styles) */
    .node .done-form {
        margin-top: 10px;
        padding: 0 !important;
        background: transparent !important;
        border: 0 !important;
        box-shadow: none !important;
    }

    /* button: IMPORTANT fix (not a long bar) */
    .node .btn-done {
        display: inline-flex !important;
        align-items: center !important;
        justify-content: center !important;
        width: auto !important;
        min-width: 78px;
        padding: 7px 12px;
        border-radius: 12px;
        border: 1px solid rgba(255,255,255,.22);
        background: rgba(0,0,0,.30);
        color: #e8eefc;
        cursor: pointer;
        font-size: 12px;
        font-weight: 800;
        white-space: nowrap;
    }

        .node .btn-done:disabled {
            opacity: .55;
            cursor: not-allowed;
        }

    /* ===== states ===== */
    .node.locked {
        opacity: .45;
        filter: grayscale(1);
    }

    .node.unlocked {
        border-color: rgba(52,211,153,.85);
    }

    .node.completed {
        border-color: rgba(34,197,94,.95);
        background: rgba(34,197,94,.14);
    }

/* ===== edges ===== */
.edge {
    stroke-width: 3;
    opacity: .18; /* باهت */
    transition: opacity .15s ease, stroke-width .15s ease, stroke .15s ease;
}

.edge-prereq {
    stroke: rgba(255,255,255,.38);
}

.edge-concurrent {
    stroke: rgba(255,255,255,.25);
    stroke-dasharray: 6 6;
}

.edge.active {
    opacity: .95;
    stroke-width: 4;
}

.edge-prereq.active {
    stroke: rgba(0,255,150,.85);
}

.edge-concurrent.active {
    stroke: rgba(255,200,0,.85);
}
